# Telegram Channel Moderator Scripts

Этот репозиторий содержит два скрипта для работы с Telegram-каналом с использованием библиотеки Telethon.

---

## Оглавление

- [Описание](#описание)
- [Требования](#требования)
- [Скрипт 1: Модерация канала](#скрипт-1-модерация-канала)
  - [Описание](#описание-1)
  - [Настройка](#настройка-1)
  - [Запуск](#запуск-1)
- [Скрипт 2: Замена текста в постах](#скрипт-2-замена-текста-в-постах)
  - [Описание](#описание-2)
  - [Настройка](#настройка-2)
  - [Запуск](#запуск-2)
- [Известные проблемы и ограничения](#известные-проблемы-и-ограничения)
- [Полезные советы](#полезные-советы)
- [Лицензия и авторские права](#лицензия-и-авторские-права)

---

## Описание

В проекте реализовано два основных скрипта:

1. **Скрипт модерации канала:**
   - Скрипт позволяет загружать всю историю сообщений Telegram-канала и проводить модерацию постов.
   - Администратору канала предоставляются 3 инлайн-кнопки:
     - **"Заблокировать"** – полностью меняет текст поста на указанный (например, сообщение о недоступности контента).
     - **"Ручная модерация"** – выводит ссылку на пост для его ручной проверки.
     - **"Пропустить"** – оставляет сообщение без изменений.

2. **Скрипт замены текста в постах:**
   - Скрипт предназначен для поиска указанного текста в постах канала и его замены на новый.
   - Автоматически просматривает все сообщения канала, заменяет текст, выводит статус обработки и делает задержку между редактированием сообщений для предотвращения блокировок.

---

## Требования

- Python 3.7 или выше.
- Установленная библиотека [Telethon](https://github.com/LonamiWebs/Telethon).

Установка необходимых пакетов:

```bash
pip install telethon
```

---

## Скрипт 1: Модерация канала

### Описание 1

Скрипт позволяет:

- Подключиться к телеграм-боту с использованием Telethon.
- Загружать всю историю сообщений канала (посты с текстом или медиа).
- Модерировать сообщения с использованием 3-х инлайн-кнопок:
  - **"Заблокировать"** – полностью изменяет текст сообщения на сообщение о недоступности контента.
  - **"Ручная модерация"** – предоставляет ссылку на сообщение для дальнейшей модерации.
  - **"Пропустить"** – пропускает текущее сообщение без изменений.

### Настройка 1

Перед запуском скрипта необходимо внести изменения в следующие параметры:

- `API_ID` и `API_HASH`: Получите их на [my.telegram.org](https://my.telegram.org).
- `BOT_TOKEN`: Токен вашего бота, полученный от [@BotFather](https://t.me/BotFather).
- `CHANNEL_ID`: ID канала (например, -1001234567890).
- `ADMIN_ID`: Ваш личный Telegram ID для получения уведомлений и управления модерацией.

**Важно:**  
При запуске скрипта в консоли необходимо вставить токен сессии или пройти авторизацию по номеру телефона с вводом кода (возможно, потребуется облачный пароль).

### Запуск 1

Запустите скрипт командой:

```bash
python script1.py
```

Далее:

- Используйте команду `/start`, чтобы получить приветственное сообщение.
- Отправьте команду `/moderate` для начала загрузки истории сообщений и модерации.

---

## Скрипт 2: Замена текста в постах

### Описание 2

Скрипт предназначен для автоматической замены указанного текста в постах канала:

- Подключается к аккаунту через Telethon.
- Находит канал по его username.
- Находит и заменяет указанный текст в сообщениях на новый.
- Выводит информацию о количестве отредактированных сообщений.
- Вводится задержка между операциями для предотвращения превышения лимитов Telegram.

### Настройка 2

Перед запуском скрипта измените следующие параметры:

- `API_ID` и `API_HASH`: Получите их на [my.telegram.org](https://my.telegram.org).
- `CHANNEL_USERNAME`: Username вашего канала (без символа @).
- `TEXT_TO_FIND`: Текст, который необходимо найти.
- `REPLACEMENT_TEXT`: Текст, на который необходимо заменить найденное значение.
- `DELAY_SECONDS`: Задержка между изменениями (рекомендуется задать 2-3 секунды).

**Важно:**  
При запуске скрипта в консоли необходимо вставить токен сессии или выполнить авторизацию с помощью номера телефона и кода (может понадобиться облачный пароль).

### Запуск 2

Запустите скрипт командой:

```bash
python script2.py
```

Скрипт автоматически просканирует все сообщения канала, выполнит замену указанного текста и выведет отчет о выполненной работе.

---

## Известные проблемы и ограничения

- **Скрипт 1:**  
  Обнаружен баг: посты с изображениями невозможно изменить (кроме ручной модерации). Фикс невозможен из-за ограничений Telegram API.

- **Скрипт 2:**  
  Обнаружен баг: все премиум эмодзи и форматирование сообщений стираются при редактировании. Фикс невозможен из-за ограничений Telegram API.

---

## Полезные советы

- Убедитесь, что у вас есть права администратора в канале, иначе скрипты не смогут выполнить необходимые операции.
- При авторизации используйте корректный токен сессии или обеспечьте быструю обработку кода авторизации (возможно, потребуется облачный пароль).
- Тщательно проверяйте настройки перед запуском (особенно API-данные и идентификаторы канала/администратора).
- При возникновении ошибок ознакомьтесь с выводом консоли для диагностики проблем и лимитов API.

---

## Лицензия и авторские права

© 2025 Begugla0. Все права защищены.
